string SkipInitialSpaces(string text) {
  int start = text.find_first_not_of(" ", 0);
  return start > 0 ? text.substr(start, text.size() - start) : text;
}

string SkipFinalSpaces(string text) {
  int end = text.find_last_not_of(" ", text.size());
  return end > 0 ? text.substr(0, end + 1) : text;
}

string SkipSpaces(string text) {
  return SkipFinalSpaces(SkipInitialSpaces(text));
}

VectorString BreakWords(string text) {
  VectorString output = VectorString();
  int start = 0;
  while (start < text.size()) {
    start = text.find_first_not_of(" ", start);
    if (start != -1) {
      int word_end = text.find_first_of(" ", start);
      if (word_end == -1) {
        word_end = text.size();
      }
      output.push_back(text.substr(start, word_end - start));
      start = word_end;
    } else {
      start = text.size();
    }
  }
  return output;
}

// Extracts the first argument in a shell command.
//
// For example, `BaseCommand("cp foo.txt bar.txt")` returns `"cp"`.
string BaseCommand(string command) {
  command = SkipInitialSpaces(command);
  int space = command.find_first_of(" ", 0);
  return space == -1 ? command : command.substr(0, space);
}

// Returns a substring of text from the start, up until (excluding) the first
// character not in line_prefix_characters.
//
// For example,
//     GetPrefix("  // For example,", " /")
// returns
//     "  // ");
string GetPrefix(string text, string prefix_characters) {
  int pos_start = text.find_first_not_of(prefix_characters, 0);
  if (pos_start == -1) {
    return text;
  }
  return text.substr(0, pos_start);
}

