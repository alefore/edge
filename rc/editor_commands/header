void LoadFileWithExtension(string old_path, int dot, string extension) {
  string new_path = old_path.substr(0, dot + 1) + extension;
  OpenFile(new_path);
  SetStatus(new_path);
}

string path = CurrentBuffer().path();
int dot = path.find_last_of(".", path.size());
if (dot == -1) {
  SetStatus("Unable to extract extension: " + path);
} else {
  string extension = path.substr(dot + 1, path.size() - dot - 1);
  if (extension == "cc") {
    LoadFileWithExtension(path, dot, "h");
  } else if (extension == "h") {
    LoadFileWithExtension(path, dot, "cc");
  } else {
    SetStatus("Unrecognized extension: " + extension);
  }
}
